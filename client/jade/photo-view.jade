extends layout

block title
	title Photo/!{photo._id} - #{appName}

block content
	script
		init.add(function() {
			photol.initPhotoView(!{JSON.stringify(photo)});
		});

	.photo-low
		img(src=photo.dir + '/' + photo._id + '-640.jpg')

	.photo-hi

	.container
		.photo-info
			.name-and
				span
					a(href='/' + encodeURIComponent(photo.user.name)) #{photo.user.name}
				//-span hit !{photo.hit}
				span !{photo.cdateStr.slice(0,16)}
				span #{photo.fname}

			#comment.comment !{jade.escape(photo.comment).replace(/\n/g, '<br>')}

			.btns
				if locals.user && (photo.user._id == user._id || user.admin)
					button#update-btn.btn.btn-primary.btn-mini Update
					button#del-btn.btn.btn-danger.btn-mini Delete
					button#del-confirm-btn.btn.btn-danger.btn-mini.hide Yes, Delete

		include layout-footer